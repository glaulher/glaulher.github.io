{"pageProps":{"frontmatter":{"title":"React não recarrega a página ao salvar no linux","author":"Glaulher Medeiros","date":"2020-06-14 12:27:00 -0300","categories":["Blogging","Tutorial"],"tags":["React","Linux"],"toc":true,"comments":true},"content":"***\n\n![image]({{ \"/assets/img/sample/react-reload/reload.png\" | relative_url }})\n\n<div style=\"text-align: justify\">  \nPara resolver esse problema é preciso alterar o valor  de max_user_watches em inotify, cada relógio inotify usado ocupa 540 bytes (sistema de 32 bits) ou 1 kB (duplo em 64 bits) Isso sai da memória do kernel, que não pode ser trocada. Supondo que você definiu o máximo em 524288 e todos foram usados (improvável), você usaria aproximadamente 256 MB / 512 MB de memória do kernel de 32 bits / 64 bits.<br />\n<br />\nObserve que seu aplicativo também utilizará memória adicional para acompanhar os identificadores inotify, os caminhos de arquivo / no diretório etc.<br />\n<br /></div>\n\nPara verificar o número máximo de relógios inotify:  \n\n```shell\ncat /proc/sys/fs/inotify/max_user_watches\n```\n\nNo Debian esse valor padrão é 8192, para definir o número máximo de relógios inotify temporariamente:\n\n```shell\n sudo sysctl fs.inotify.max_user_watches = com o seu valor preferido no final.\n```\n\n**Para definir o número máximo de relógios inotify definitivamente:**\n\n```shell\nsudo -i\necho \"fs.inotify.max_user_watches=524288\" |tee -a /etc/sysctl.conf\nsysctl -p\nexit\n```\n\n\n<div style=\"text-align: justify\"> \nPermanentemente (informações mais detalhadas):<br />\n\nColoque fs.inotify.max_user_watches = 524288 nas configurações do sysctl. Dependendo do seu sistema, eles podem estar em um dos seguintes locais:<br />\nDebian / RedHat: /etc/sysctl.conf<br />\nArch: coloque um novo arquivo em /etc/sysctl.d/, por exemplo /etc/sysctl.d/40-max-user-watches.conf<br />\nVocê pode recarregar as configurações do sysctl para evitar uma reinicialização: sysctl -p (Debian / RedHat) ou sysctl --system (Arch)<br />\nVerifique se o número máximo de relógios inotify foi atingido:<br />\n\nUse tail com a opção -f (follow) em qualquer arquivo antigo, por exemplo tail -f / var / log / dmesg: - Se estiver tudo bem, mostrará as últimas 10 linhas e fará uma pausa; abortar com Ctrl-C - Se você estiver sem relógio, falhará com este erro um tanto enigmático:\n</div><br />\n\n```shell\ntail: cannot watch '/var/log/dmsg': No space left on device\n```\nPara ver o que está usando os relógios inotify:\n\n```shell\nfind /proc/*/fd -lname anon_inode:inotify |\n   cut -d/ -f3 |\n   xargs -I '{}' -- ps --no-headers -o '%p %U %c' -p '{}' |\n   uniq -c |\n   sort -nr\n```\n\nA primeira coluna indica o número de inotify fds (embora não seja o número de relógios) e a segunda mostra o PID desse processo.\n\nfontes:\n\n[askbuntu]( https://askubuntu.com/questions/716431/inotify-max-user-watches-value-resets-on-reboot-how-to-change-it-permanently){:target=\"_blank\" rel=\"noopener\"}\n\n[dev.to](https://dev.to/rubiin/ubuntu-increase-inotify-watcher-file-watch-limit-kf4){:target=\"_blank\" rel=\"noopener\"}\n\n[stackoverflow](https://stackoverflow.com/questions/42189575/create-react-app-reload-not-working){:target=\"_blank\" rel=\"noopener\"}\n\n\n\n\n"},"__N_SSG":true}
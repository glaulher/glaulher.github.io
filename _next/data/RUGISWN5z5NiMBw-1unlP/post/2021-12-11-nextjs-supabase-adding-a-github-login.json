{"pageProps":{"frontmatter":{"title":"Next.js Supabase adding a GitHub login","metaTitle":"Next.js Supabase adding a GitHub login","metaDesc":"How to add a GitHub login to Next.js using Supabase social authentication","socialImage":"images/11-12-2021.png","date":"2021-12-11T00:00:00.000Z","tags":["nextjs"]},"content":"\nNow that we have our [basic Supabase auth setup](https://daily-dev-tips.com/posts/authenticating-nextjs-with-supabase-auth-magic-links/) with our magic link login let's see how we can add GitHub as a login provider.\n\nThat way, users can also sign up by using their GitHub account.\n\nThe end result will be the following flow:\n\n<!-- ![Next.js Supabase adding a GitHub login](https://cdn.hashnode.com/res/hashnode/image/upload/v1638246844582/G0mIY5Z4L.gif) -->\n<video autoplay loop muted playsinline>\n  <source src=\"https://res.cloudinary.com/daily-dev-tips/video/upload/v1638246910/ghlogin_q4uggu.webm\" type=\"video/webm\" />\n  <source src=\"https://res.cloudinary.com/daily-dev-tips/video/upload/v1638246910/ghlogin_vwcwru.mp4\" type=\"video/mp4\" />\n</video>\n\n## Getting the GitHub tokens\n\nThe first thing we need to do is create an app on GitHub to get the API token from there.\n\nGo to the [GitHub developer center](https://github.com/settings/developers) and create a new OAuth app.\n\n![GitHub new OAuth app](https://cdn.hashnode.com/res/hashnode/image/upload/v1638245914307/IZwcOQU6b.png)\n\nYou'll need to fill out the details on the next step.\nTo find your Authorization callback URL visit the Supabase interface.\n\nThe URL we need is the following one:\n\n![Supabase API URL](https://cdn.hashnode.com/res/hashnode/image/upload/v1638245883918/O_33yuynl.png)\n\nHowever, you'll have to add the following to the end of this URL: `/auth/v1/callback`.\n\nMy end URL looks like this:\n\n`https://texcivmahyzsgwyjdvvj.supabase.co/auth/v1/callback`\n\nFinish creating this OAuth app in GitHub, now you should get a page where you have to generate a new secret.\n\n![Generate secret in GitHub](https://cdn.hashnode.com/res/hashnode/image/upload/v1638246084272/ndMxb5NX4.png)\n\nOnce you generate the secret, note this down as well as the client id.\n\nAnd then head back over to Supabase.\nClick the Authentication menu and visit the settings.\n\nHere you can enable all separate providers. In our case, we want GitHub.\n\n![GitHub provider in Supabase](https://cdn.hashnode.com/res/hashnode/image/upload/v1638246190830/mwXFYAc8G.png)\n\nFill out the client id and secret as you just retrieved them from GitHub.\n\n## Adding the GitHub login to Next.js\n\nNow it's finally time to open our Next.js application.\nWe'll be using the one we made before.\nWhich you can find on [GitHub](https://github.com/rebelchris/next-supabase/tree/loading-state).\n\nOpen up the `components/Login.js` component.\nLet's start by adding the function that will authenticate the user.\n\nWe can make use of the [loading state](https://daily-dev-tips.com/posts/add-a-loading-state-to-our-nextjs-supabase-app/) we created before.\n\n```js\nconst handleGitHubLogin = async () => {\n  try {\n    setLoading(true);\n    const { error } = await supabase.auth.signIn({\n      provider: 'github',\n    });\n    if (error) throw error;\n  } catch (error) {\n    alert(error.error_description || error.message);\n  } finally {\n    setLoading(false);\n  }\n};\n```\n\nAnd now, all we need to do is render the button in our HTML.\n\n```jsx\n<button\n  className='mt-4 p-2 pl-5 pr-5 bg-blue-500 text-gray-100 text-lg rounded-lg focus:border-4 border-blue-300'\n  onClick={() => handleGitHubLogin()}\n  disabled={loading}\n>\n  {loading ? 'Logging in' : 'Login with GitHub'}\n</button>\n```\n\nAnd that's it!\nWe can now log in through GitHub and still enrich our profile.\n\nYou can download the complete code on [GitHub](https://github.com/rebelchris/next-supabase/tree/github-login).\n\n### Thank you for reading, and let's connect!\n\nThank you for reading my blog. Feel free to subscribe to my email newsletter and connect on [Facebook](https://www.facebook.com/DailyDevTipsBlog) or [Twitter](https://twitter.com/DailyDevTips1)\n"},"__N_SSG":true}
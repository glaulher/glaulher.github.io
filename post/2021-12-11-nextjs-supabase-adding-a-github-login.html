<!DOCTYPE html><html class="dark" lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Blog Post-it - tips software developer</title><meta name="next-head-count" content="3"/><meta name="description" content="tips to Software engineer"/><link rel="shortcut icon" href="/icons/favicon.ico"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/9df80f4fbf89c51f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9df80f4fbf89c51f.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-5020794388548d5e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-e88247b00d8b3bd2.js" defer=""></script><script src="/_next/static/chunks/980-13c5ebce3d92dd6c.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-46a124a80698c1fd.js" defer=""></script><script src="/_next/static/vJU5HpIxdKL9pHSdkpAgu/_buildManifest.js" defer=""></script><script src="/_next/static/vJU5HpIxdKL9pHSdkpAgu/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0&display=swap">@font-face{font-family:'Material Symbols Outlined';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/materialsymbolsoutlined/v88/kJF1BvYX7BgnkSrUwT8OhrdQw4oELdPIeeII9v6oDMzByHX9rA6RzaxHMPdY43zj-jCxv3fzvRNU22ZXGJpEpjC_1n-q_4MrImHCIJIZrDCvHOel.woff) format('woff')}.material-symbols-outlined{font-family:'Material Symbols Outlined';font-weight:normal;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;font-feature-settings:'liga'}@font-face{font-family:'Material Symbols Outlined';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/materialsymbolsoutlined/v88/kJF1BvYX7BgnkSrUwT8OhrdQw4oELdPIeeII9v6oDMzByHX9rA6RzaxHMPdY43zj-jCxv3fzvRNU22ZXGJpEpjC_1n-q_4MrImHCIJIZrDCvHOelbd5zrDAt.woff) format('woff')}.material-symbols-outlined{font-family:'Material Symbols Outlined';font-weight:normal;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased}</style></head><body class="dark:bg-slate-900"><div id="__next"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="flex flex-col min-h-screen"><header class="bg-slate-600 mb-8 px-6 py-4 "><div class="container lg:mx-auto md:mx-auto flex justify-center"><a href="/"><img alt="Menu" src="/menuIcons/svgviewer-output.svg" width="60" height="60" decoding="async" data-nimg="1" class=" -mb-2 -mt-4 " loading="lazy" style="color:transparent"/></a><a href="/"><p class="text-lg ml-4 -mt-4 text-neutral-200 hover:text-sky-700">Bem vindo ao</p><p class="text-lg ml-8 -mb-4 text-neutral-200 hover:text-sky-700">Blog Post-it</p></a><div class=" ml-auto text-neutral-200"><button type="button" aria-label="Toggle dark mode"><span class="hover:text-sky-700 material-symbols-outlined"></span></button></div></div></header><main class="container mx-auto flex-1"><div class="prose dark:prose-invert mx-auto"><h1>Next.js Supabase adding a GitHub login</h1><div><p>Now that we have our <a href="https://daily-dev-tips.com/posts/authenticating-nextjs-with-supabase-auth-magic-links/">basic Supabase auth setup</a> with our magic link login let's see how we can add GitHub as a login provider.</p>
<p>That way, users can also sign up by using their GitHub account.</p>
<p>The end result will be the following flow:</p>
<p>&lt;!-- <img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1638246844582/G0mIY5Z4L.gif" alt="Next.js Supabase adding a GitHub login"> --&gt;
&lt;video autoplay loop muted playsinline&gt;
&lt;source src=&quot;https://res.cloudinary.com/daily-dev-tips/video/upload/v1638246910/ghlogin_q4uggu.webm&quot; type=&quot;video/webm&quot; /&gt;
&lt;source src=&quot;https://res.cloudinary.com/daily-dev-tips/video/upload/v1638246910/ghlogin_vwcwru.mp4&quot; type=&quot;video/mp4&quot; /&gt;
&lt;/video&gt;</p>
<h2>Getting the GitHub tokens</h2>
<p>The first thing we need to do is create an app on GitHub to get the API token from there.</p>
<p>Go to the <a href="https://github.com/settings/developers">GitHub developer center</a> and create a new OAuth app.</p>
<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1638245914307/IZwcOQU6b.png" alt="GitHub new OAuth app"></p>
<p>You'll need to fill out the details on the next step.
To find your Authorization callback URL visit the Supabase interface.</p>
<p>The URL we need is the following one:</p>
<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1638245883918/O_33yuynl.png" alt="Supabase API URL"></p>
<p>However, you'll have to add the following to the end of this URL: <code>/auth/v1/callback</code>.</p>
<p>My end URL looks like this:</p>
<p><code>https://texcivmahyzsgwyjdvvj.supabase.co/auth/v1/callback</code></p>
<p>Finish creating this OAuth app in GitHub, now you should get a page where you have to generate a new secret.</p>
<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1638246084272/ndMxb5NX4.png" alt="Generate secret in GitHub"></p>
<p>Once you generate the secret, note this down as well as the client id.</p>
<p>And then head back over to Supabase.
Click the Authentication menu and visit the settings.</p>
<p>Here you can enable all separate providers. In our case, we want GitHub.</p>
<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1638246190830/mwXFYAc8G.png" alt="GitHub provider in Supabase"></p>
<p>Fill out the client id and secret as you just retrieved them from GitHub.</p>
<h2>Adding the GitHub login to Next.js</h2>
<p>Now it's finally time to open our Next.js application.
We'll be using the one we made before.
Which you can find on <a href="https://github.com/rebelchris/next-supabase/tree/loading-state">GitHub</a>.</p>
<p>Open up the <code>components/Login.js</code> component.
Let's start by adding the function that will authenticate the user.</p>
<p>We can make use of the <a href="https://daily-dev-tips.com/posts/add-a-loading-state-to-our-nextjs-supabase-app/">loading state</a> we created before.</p>
<pre><code class="language-js">const handleGitHubLogin = async () =&gt; {
  try {
    setLoading(true);
    const { error } = await supabase.auth.signIn({
      provider: 'github',
    });
    if (error) throw error;
  } catch (error) {
    alert(error.error_description || error.message);
  } finally {
    setLoading(false);
  }
};
</code></pre>
<p>And now, all we need to do is render the button in our HTML.</p>
<pre><code class="language-jsx">&lt;button
  className='mt-4 p-2 pl-5 pr-5 bg-blue-500 text-gray-100 text-lg rounded-lg focus:border-4 border-blue-300'
  onClick={() =&gt; handleGitHubLogin()}
  disabled={loading}
&gt;
  {loading ? 'Logging in' : 'Login with GitHub'}
&lt;/button&gt;
</code></pre>
<p>And that's it!
We can now log in through GitHub and still enrich our profile.</p>
<p>You can download the complete code on <a href="https://github.com/rebelchris/next-supabase/tree/github-login">GitHub</a>.</p>
<h3>Thank you for reading, and let's connect!</h3>
<p>Thank you for reading my blog. Feel free to subscribe to my email newsletter and connect on <a href="https://www.facebook.com/DailyDevTipsBlog">Facebook</a> or <a href="https://twitter.com/DailyDevTips1">Twitter</a></p>
</div></div></main><footer class="bg-slate-700 mt-8 py-4"><div class="container mx-auto flex justify-center"><span class="mx-auto text-neutral-200">Â© 2022 DailyDevTips</span></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"title":"Next.js Supabase adding a GitHub login","metaTitle":"Next.js Supabase adding a GitHub login","metaDesc":"How to add a GitHub login to Next.js using Supabase social authentication","socialImage":"images/11-12-2021.jpg","date":"2021-12-11","tags":["nextjs"]},"content":"\nNow that we have our [basic Supabase auth setup](https://daily-dev-tips.com/posts/authenticating-nextjs-with-supabase-auth-magic-links/) with our magic link login let's see how we can add GitHub as a login provider.\n\nThat way, users can also sign up by using their GitHub account.\n\nThe end result will be the following flow:\n\n\u003c!-- ![Next.js Supabase adding a GitHub login](https://cdn.hashnode.com/res/hashnode/image/upload/v1638246844582/G0mIY5Z4L.gif) --\u003e\n\u003cvideo autoplay loop muted playsinline\u003e\n  \u003csource src=\"https://res.cloudinary.com/daily-dev-tips/video/upload/v1638246910/ghlogin_q4uggu.webm\" type=\"video/webm\" /\u003e\n  \u003csource src=\"https://res.cloudinary.com/daily-dev-tips/video/upload/v1638246910/ghlogin_vwcwru.mp4\" type=\"video/mp4\" /\u003e\n\u003c/video\u003e\n\n## Getting the GitHub tokens\n\nThe first thing we need to do is create an app on GitHub to get the API token from there.\n\nGo to the [GitHub developer center](https://github.com/settings/developers) and create a new OAuth app.\n\n![GitHub new OAuth app](https://cdn.hashnode.com/res/hashnode/image/upload/v1638245914307/IZwcOQU6b.png)\n\nYou'll need to fill out the details on the next step.\nTo find your Authorization callback URL visit the Supabase interface.\n\nThe URL we need is the following one:\n\n![Supabase API URL](https://cdn.hashnode.com/res/hashnode/image/upload/v1638245883918/O_33yuynl.png)\n\nHowever, you'll have to add the following to the end of this URL: `/auth/v1/callback`.\n\nMy end URL looks like this:\n\n`https://texcivmahyzsgwyjdvvj.supabase.co/auth/v1/callback`\n\nFinish creating this OAuth app in GitHub, now you should get a page where you have to generate a new secret.\n\n![Generate secret in GitHub](https://cdn.hashnode.com/res/hashnode/image/upload/v1638246084272/ndMxb5NX4.png)\n\nOnce you generate the secret, note this down as well as the client id.\n\nAnd then head back over to Supabase.\nClick the Authentication menu and visit the settings.\n\nHere you can enable all separate providers. In our case, we want GitHub.\n\n![GitHub provider in Supabase](https://cdn.hashnode.com/res/hashnode/image/upload/v1638246190830/mwXFYAc8G.png)\n\nFill out the client id and secret as you just retrieved them from GitHub.\n\n## Adding the GitHub login to Next.js\n\nNow it's finally time to open our Next.js application.\nWe'll be using the one we made before.\nWhich you can find on [GitHub](https://github.com/rebelchris/next-supabase/tree/loading-state).\n\nOpen up the `components/Login.js` component.\nLet's start by adding the function that will authenticate the user.\n\nWe can make use of the [loading state](https://daily-dev-tips.com/posts/add-a-loading-state-to-our-nextjs-supabase-app/) we created before.\n\n```js\nconst handleGitHubLogin = async () =\u003e {\n  try {\n    setLoading(true);\n    const { error } = await supabase.auth.signIn({\n      provider: 'github',\n    });\n    if (error) throw error;\n  } catch (error) {\n    alert(error.error_description || error.message);\n  } finally {\n    setLoading(false);\n  }\n};\n```\n\nAnd now, all we need to do is render the button in our HTML.\n\n```jsx\n\u003cbutton\n  className='mt-4 p-2 pl-5 pr-5 bg-blue-500 text-gray-100 text-lg rounded-lg focus:border-4 border-blue-300'\n  onClick={() =\u003e handleGitHubLogin()}\n  disabled={loading}\n\u003e\n  {loading ? 'Logging in' : 'Login with GitHub'}\n\u003c/button\u003e\n```\n\nAnd that's it!\nWe can now log in through GitHub and still enrich our profile.\n\nYou can download the complete code on [GitHub](https://github.com/rebelchris/next-supabase/tree/github-login).\n\n### Thank you for reading, and let's connect!\n\nThank you for reading my blog. Feel free to subscribe to my email newsletter and connect on [Facebook](https://www.facebook.com/DailyDevTipsBlog) or [Twitter](https://twitter.com/DailyDevTips1)\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2021-12-11-nextjs-supabase-adding-a-github-login"},"buildId":"vJU5HpIxdKL9pHSdkpAgu","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>